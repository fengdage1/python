def shell( commandArray, timeout=60):  # python控制shell执行时间，若超时则强行推出
    pro = subprocess.Popen(commandArray, shell=False,stdout=subprocess.PIPE)
    start = time.clock()
    while 1:
        ret = subprocess.Popen.poll(pro)
        if ret == 0:  # shell执行完成
            try:
                pro.terminate()
                pro.kill()
            finally:
                return True,pro.stdout.read()
        elif ret is None:  # shell还在执行中
            if time.clock() - start > timeout:
                try:
                    pro.terminate()
                    pro.kill()
                finally:
                    break
        else:  # 意外情况
            try:
                pro.terminate()
                pro.kill()
            finally:
                break
    try:
        pro.terminate()
        pro.kill()
    finally:
        return False
        
        


//非阻塞方式直接执行shell
subprocess.Popen(commandArray, shell=False)
